<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Свинка-бегун с TON</title>
  <!-- Подключаем пиксельный шрифт (опционально для атмосферы) -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
  />
  <style>
    /* Сброс отступов, 100% высота, запрет скролла */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: #a2d9ff; /* Примерный цвет «неба» */
      font-family: Arial, sans-serif;
    }

    /*******************************************************
      1. Экран Loading 
    ********************************************************/
    .loading-screen {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      /* Пиксельный коричневый фон (Base64-текстура) */
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAQAAADZ9HSAAAAAJ0lEQVR42mNk+P9pgGFkMFAwgELg4uDjAkJ04+JDHNFdQHAH6HkHYURX8EAAAAASUVORK5CYII=");
      background-repeat: repeat;
      background-size: 32px 32px;
    }
    .loading-text {
      font-family: 'Press Start 2P', monospace;
      font-size: 1.8rem;
      color: #fff;
      white-space: nowrap;
      animation: bounce 1.5s infinite;
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-20px); }
      60% { transform: translateY(-10px); }
    }
    /* Скрывать после загрузки */
    .hidden {
      display: none;
    }

    /*******************************************************
      2. Верхняя панель c TON балансом
    ********************************************************/
    .top-bar {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 50px;
      background: #333;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0 20px;
      box-sizing: border-box;
      z-index: 10;
      font-family: 'Press Start 2P', monospace; /* пиксельный шрифт */
      font-size: 0.8rem;
    }
    .ton-icon {
      width: 16px; 
      height: 16px;
      vertical-align: middle;
      margin-left: 4px;
      margin-right: 4px;
    }

    /*******************************************************
      3. Пиксельный пол (снизу)
    ********************************************************/
    .floor {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 80px;
      z-index: 9;
      /* Примерная коричневая текстура (4×4) в Base64 */
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAQAAADZ9HSAAAAAJ0lEQVR42mNk+P9pgGFkMFAwgELg4uDjAkJ04+JDHNFdQHAH6HkHYURX8EAAAAASUVORK5CYII=");
      background-repeat: repeat;
      background-size: 32px 32px;
    }

    /*******************************************************
      4. «Игровая» область, где бегает свинка
    ********************************************************/
    .game-area {
      position: absolute;
      top: 50px; /* под панелью */
      left: 0;
      width: 100%;
      height: calc(100% - 50px - 80px); /* вычитаем высоту top-bar и пола */
      overflow: hidden;
    }

    /*******************************************************
      5. Свинка
    ********************************************************/
    .pig {
      position: absolute;
      width: 200px;  /* Побольше свинка */
      height: 200px; /* Контейнер под картинку + облачко */
      transform: translate(-50%, -50%);
      top: 50%; /* старт в центре */
      left: 50%;
      /* Плавное перемещение свинки по экрану (2s linear) */
      transition: top 2s linear, left 2s linear;
    }
    .pig img {
      display: block;
      width: 150px; /* Размер самой свинки */
      height: auto;
      margin: 0 auto;
    }

    /*******************************************************
      Облачко речи «fumetti»
    ********************************************************/
    .speech-bubble {
      position: absolute;
      bottom: 100%; /* располагается над свинкой */
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      color: #333;
      border: 2px solid #333;
      border-radius: 8px;
      padding: 4px 8px;
      font-size: 0.8rem;
      font-family: 'Press Start 2P', monospace;
      white-space: nowrap;
    }
    .speech-bubble::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: #fff;
    }

    /*******************************************************
      6. Нижняя панель с кнопками (депозит, вывод, корм)
    ********************************************************/
    .bottom-menu {
      position: absolute;
      bottom: 0; left: 0; 
      width: 100%;
      height: 80px;
      background: #eee;
      border-top: 2px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 11;
      font-family: 'Press Start 2P', monospace;
      font-size: 0.8rem;
    }
    .bottom-menu button {
      margin: 0 10px;
      padding: 8px 16px;
      cursor: pointer;
      border: 2px solid #999;
      background: #fff;
      transition: background 0.2s, transform 0.2s;
    }
    .bottom-menu button:hover {
      background: #ffd;
      transform: scale(1.05);
    }
  </style>
</head>
<body>

  <!-- 1. Экран загрузки -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-text">Loading...</div>
  </div>

  <!-- 2. Верхняя панель с TON балансом -->
  <div class="top-bar">
    <!-- Пример начального баланса: 10 TON -->
    <span id="tonBalanceSpan">TON <img src="images1/ton.jpg" class="ton-icon" alt="TON"/>: 10.00</span>
  </div>

  <!-- 3. Пол снизу -->
  <div class="floor"></div>

  <!-- 4. Область, где свинка будет бегать -->
  <div class="game-area" id="gameArea">
    <!-- 5. Свинка (бегает плавно) -->
    <div class="pig" id="pig">
      <div class="speech-bubble">Привет!</div>
      <!-- Картинка свинки (png с прозрачным фоном) -->
      <img src="images1/pig223.png" alt="Pig" />
    </div>
  </div>

  <!-- 6. Нижняя панель с кнопками -->
  <div class="bottom-menu">
    <button id="depositBtn">Депозит <img src="images1/ton.jpg" class="ton-icon" alt="TON"/></button>
    <button id="withdrawBtn">Вывод <img src="images1/ton.jpg" class="ton-icon" alt="TON"/></button>
    <button id="feedBtn">Корм (0.5 <img src="images1/ton.jpg" class="ton-icon" alt="TON"/>)</button>
  </div>

  <script>
    /******************************************
     *  ПЕРЕМЕННЫЕ ДЛЯ БАЛАНСА
     ******************************************/
    let tonBalance = 10.0; // начальный баланс
    const tonBalanceSpan = document.getElementById('tonBalanceSpan');

    function updateBalanceDisplay() {
      tonBalanceSpan.innerHTML = `TON <img src="images1/ton.jpg" class="ton-icon" alt="TON"/>: ${tonBalance.toFixed(2)}`;
    }

    /******************************************
     *  ЗАПУСК ПОСЛЕ "LOADING..." (2 СЕК.)
     ******************************************/
    setTimeout(() => {
      document.getElementById('loadingScreen').classList.add('hidden');
    }, 2000); // через 2с скрываем экран загрузки

    /******************************************
     *  СВИНКА «БЕГАЕТ» ПЛАВНО (CSS transition)
     ******************************************/
    const pig = document.getElementById('pig');
    const gameArea = document.getElementById('gameArea');
    const pigWidth = 200;   // совпадает с .pig { width: 200px; }
    const pigHeight = 200;  // совпадает с .pig { height: 200px; }

    function movePigRandomly() {
      // размеры области
      const areaWidth = gameArea.clientWidth;
      const areaHeight = gameArea.clientHeight;

      // Максимально возможные координаты (учитываем размеры .pig)
      const maxX = areaWidth - pigWidth / 2;
      const minX = pigWidth / 2;
      const maxY = areaHeight - pigHeight / 2;
      const minY = pigHeight / 2;

      // Случайные координаты в этом диапазоне
      const newX = Math.floor(Math.random() * (maxX - minX + 1)) + minX;
      const newY = Math.floor(Math.random() * (maxY - minY + 1)) + minY;

      // Устанавливаем через style — CSS transition сделает плавное движение
      pig.style.left = newX + 'px';
      pig.style.top = newY + 'px';
    }

    // Каждые 3 секунды свинка «бегает» в новое место
    setInterval(movePigRandomly, 3000);

    /******************************************
     *  ЛОГИКА КНОПОК: ДЕПОЗИТ / ВЫВОД / КОРМ
     ******************************************/
    const depositBtn = document.getElementById('depositBtn');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const feedBtn = document.getElementById('feedBtn');

    depositBtn.addEventListener('click', () => {
      const input = prompt("Введите сумму депозита TON:");
      if (input !== null) {
        const depositAmount = parseFloat(input);
        if (!isNaN(depositAmount) && depositAmount > 0) {
          tonBalance += depositAmount;
          updateBalanceDisplay();
          alert(`Вы успешно внесли ${depositAmount} TON!`);
        } else {
          alert("Некорректная сумма депозита.");
        }
      }
    });

    withdrawBtn.addEventListener('click', () => {
      const input = prompt("Введите сумму вывода TON:");
      if (input !== null) {
        const withdrawAmount = parseFloat(input);
        if (!isNaN(withdrawAmount) && withdrawAmount > 0) {
          if (withdrawAmount <= tonBalance) {
            tonBalance -= withdrawAmount;
            updateBalanceDisplay();
            alert(`Вы успешно вывели ${withdrawAmount} TON!`);
          } else {
            alert("Недостаточно TON на балансе.");
          }
        } else {
          alert("Некорректная сумма вывода.");
        }
      }
    });

    feedBtn.addEventListener('click', () => {
      // Корм стоит 0.5 TON
      const feedCost = 0.5;
      if (tonBalance >= feedCost) {
        tonBalance -= feedCost;
        updateBalanceDisplay();
        alert("Свинка покормлена. Хрю-хрю!");
      } else {
        alert("Недостаточно TON на балансе, чтобы купить корм.");
      }
    });

    // Инициируем баланс на старте
    updateBalanceDisplay();
  </script>
</body>
</html>
